parcelRequire=function(e,r,n,t){function i(n,t){function o(e){return i(o.resolve(e))}function c(r){return e[n][1][r]||r}if(!r[n]){if(!e[n]){var l="function"==typeof parcelRequire&&parcelRequire;if(!t&&l)return l(n,!0);if(u)return u(n,!0);if(f&&"string"==typeof n)return f(n);var p=new Error("Cannot find module '"+n+"'");throw p.code="MODULE_NOT_FOUND",p}o.resolve=c;var a=r[n]=new i.Module(n);e[n][0].call(a.exports,o,a,a.exports,this)}return r[n].exports}function o(e){this.id=e,this.bundle=i,this.exports={}}var u="function"==typeof parcelRequire&&parcelRequire,f="function"==typeof require&&require;i.isParcelRequire=!0,i.Module=o,i.modules=e,i.cache=r,i.parent=u;for(var c=0;c<n.length;c++)i(n[c]);if(n.length){var l=i(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):t&&(this[t]=l)}return i}({38:[function(require,module,exports) {
module.exports={getRadian:function(t){return t*(Math.PI/180)},getSine:function(t){return Math.sin(this.getRadian(t))},getCosine:function(t){return Math.cos(this.getRadian(t))},pythagoreanTheorem:function(t,n,e,a){var r=Math.abs(t-e),i=Math.abs(n-a);return Math.sqrt(Math.pow(r,2)+Math.pow(i,2))},getAngle:function(t,n,e,a){var r=t-e,i=n-a,u=Math.atan2(r,i);return u*=180/Math.PI,u*=-1},getVertextAngle:function(t,n,e){var a=[n[0]-t[0],n[1]-t[1]],r=[n[0]-e[0],n[1]-e[1]],i=a[0]*r[0]+a[1]*r[1],u=a[0]*r[1]-a[1]*r[0];return 180*Math.atan2(u,i)/Math.PI},checkLineIntersection:function(t,n,e,a,r,i,u,h){var o=!0,c=(h-i)*(e-t)-(u-r)*(a-n);if(0===c)return o;var M=n-i,g=t-r,s=(u-r)*M-(h-i)*g;return g=((e-t)*M-(a-n)*g)/c,(M=s/c)>0&&M<1&&g>0&&g<1&&(o=!1),o},getLineCenter:function(t,n,e,a){var r=0,i=0,u=0,h=0;return t>e?(r=t,i=e):(r=e,i=t),n>a?(u=n,h=a):(u=a,h=n),[(r-i)/2+i,(u-h)/2+h]}};
},{}],26:[function(require,module,exports) {
var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},r=function(n){return function(r){for(var t=0,u=r.length;t<u;t++)n(r[t],t,r,u);return r}},t=function(n){return function(r){for(var t=0;t<r;t++)n(t,r);return r}},u=function(n){return function(t){var u=[];return r(function(r){u.push(n(r))})(t),u}},o=function(n){return function(t){var u=[];return r(function(r){n(r)&&u.push(r)})(t),u}},e=function(n){return function(r){for(var t=0,u=r.length;t<u;t++)if(n(r[t],t,r))return r[t];return null}},f=function(n){return function(r){for(var t=0,u=r.length;t<u;t++)if(n(r[t],t,r))return t;return-1}},i=function(n,t){return function(u){return r(function(r){n=t(n,r)})(u),n}},c=function(){for(var n=arguments.length,r=Array(n),t=0;t<n;t++)r[t]=arguments[t];return function(n){return i(n,function(n,r){return r(n)})(r)}},a=function(){for(var n=arguments.length,t=Array(n),u=0;u<n;u++)t[u]=arguments[u];return function(n){return r(function(r){return r(n)})(t),n}},l=function(n){return void 0===n},v=function(n){return!n},y=function r(t){if("object"!==(void 0===t?"undefined":n(t)))return t;var u=t.constructor();for(var o in t)t.hasOwnProperty(o)&&(u[o]=r(t[o]));return u},p=function(n,r){var t=y(r);for(var u in n)l(t[u])&&(t[u]=n[u]);return t};module.exports={each:r,loop:t,map:u,filter:o,find:e,findIndex:f,reduce:i,pipe:c,divEq:a,isUndefined:l,negate:v,clone:y,merge:p};
},{}],25:[function(require,module,exports) {
var t=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var u,c=t[Symbol.iterator]();!(n=(u=c.next()).done)&&(r.push(u.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{!n&&c.return&&c.return()}finally{if(i)throw o}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),e=require("./fp");module.exports={setAttr:function(t,e,r){return r&&(r=null),function(n){return n.setAttributeNS(r,t,e),n}},getAttr:function(t){return function(e){return e.getAttributeNS(null,t)}},setHrefAttr:function(t){return this.setAttr("href",t,"http://www.w3.org/1999/xlink")},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},style:function(t,e){return function(r){return r.style[t]=e,r}},createSVGElement:function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)},createLine:function(t){return e.pipe(this.createSVGElement,e.divEq(this.setAttr("stroke-width",t),this.setAttr("draggable",!1)))("line")},createCircle:function(t){return e.pipe(this.createSVGElement,e.divEq(this.setAttr("r",t),this.setAttr("draggable",!1)))("circle")},createRect:function(t,r){return e.pipe(this.createSVGElement,e.divEq(this.setAttr("width",t),this.setAttr("height",r),this.setAttr("draggable",!1)))("rect")},createText:function(t){return e.pipe(this.createSVGElement,this.setAttr("draggable",!1),function(e){return e.textContent=t,e})("text")},createGroup:function(){return this.createSVGElement("g")},createImage:function(t,r,n){var i=this.createGroup(),o=e.pipe(this.createSVGElement,e.divEq(this.setHrefAttr(t),this.setAttr("width",r),this.setAttr("height",n),this.setAttr("draggable",!1)))("image");return i.appendChild(o),[o,i]},createPolygon:function(){return e.pipe(this.createSVGElement,this.setAttr("draggable",!1))("polygon")},createUse:function(){return this.createSVGElement("use")},getBodyScroll:function(){var t=!1,e=document.body,r=document.documentElement;return 0!==e.scrollTop||0!==e.scrollLeft?t={left:e.scrollLeft,top:e.scrollTop}:0===r.scrollTop&&0===r.scrollLeft||(t={left:r.scrollLeft,top:r.scrollTop}),t},getSVGOffset:function(t){return function(){var e=t.getBoundingClientRect();return{top:e.top,left:e.left,width:e.width,height:e.height}}},getPageAxis:function(r,n){var i=this;return e.pipe(this.getSVGOffset(r),function(t){var e=t.left,r=t.top;return[n.pageX-e,n.pageY-r]},function(e){var r=t(e,2),n=r[0],o=r[1],u=i.getBodyScroll();return u&&(n-=u.left,o-=u.top),[n,o]})()},getSize:function(t){return{width:e.pipe(this.getAttr("width"),function(e){return e||t.clientWidth},parseInt)(t),height:e.pipe(this.getAttr("height"),function(e){return e||t.clientHeight},parseInt)(t)}}};
},{"./fp":26}],39:[function(require,module,exports) {
var t=require("../../common/ElementController"),i=require("../../common/fp");function n(n,e){var s=this;this.points=i.clone(n.options.points),this.isAllSelected=!1,this.setIsAllSelectedState=function(t){this.isAllSelected=t},this.modifyPoints=function(t){this.setPoints(t),n.changeAxis()},this.getRectangleIndex=function(){var t=[],i=n.options.flip,e=n.options.mirror,s=i&&e;return t[0]=s?2:i?1:e?3:0,t[1]=s?3:i?0:e?2:1,t[2]=s?0:i?3:e?1:2,t[3]=s?1:i?2:e?0:3,t},this.alignCenter=function(){var i=t.getSize(e),o=s.getAxis(0),h=s.getAxis(2),c=h[0]-o[0],r=h[1]-o[1],l=Math.round(i.width/2-c/2),u=Math.round(i.height/2-r/2),a=l+c,d=u+r;s.setAxis(0,l,u),s.setAxis(1,l,d),s.setAxis(2,a,d),s.setAxis(3,a,u),n.changeAxis()},this.changeMinSizeOption=function(t){n.options.minSize=i.clone(t)},this.changeMaxSizeOption=function(t){n.options.maxSize=i.clone(t)},this.addAxis=function(s,o,h){var c=null,r=null,l=t.getSVGOffset(e)(),u=this.getPointsLength();i.isUndefined(s)&&i.isUndefined(o)?((r=[(c=this.getAxis(u-1))[0],c[1]])[0]+=n.options.circleRadius,r[1]+=n.options.circleRadius,r[0]<0&&(r[0]=0),r[1]<0&&(r[1]=0),r[0]>l.width&&(r[0]=l.width),r[1]>l.height&&(r[1]=l.height)):r=[s,o],i.negate(i.isUndefined(h))?this.appendAxis(h,r[0],r[1]):this.setAxis(u,r[0],r[1])},this.validateAxis=function(i,n){var s=t.getSVGOffset(e)(),o=!0;return(i<0||n<0||i>s.width||n>s.height)&&(o=!1),o},this.validateAllPoint=function(t,n){var e=this;return!i.find(function(i){return!e.validateAxis(i[0]+t,i[1]+n)})(this.getPoints())}}n.prototype={setPoints:function(t){this.points=i.clone(t)},getPoints:function(){return i.clone(this.points)},getPointsLength:function(){return this.points.length},setAxis:function(t,i,n){this.points[t]=[i,n]},appendAxis:function(t,i,n){this.points.splice(t,0,[i,n])},getAxis:function(t){return this.points[t]}},module.exports=n;
},{"../../common/ElementController":25,"../../common/fp":26}],50:[function(require,module,exports) {
"use strict";var e=require("../../common/ElementController"),i=require("../../common/fp");module.exports=function(i,n){var o=null,t=i.options.notUseMoveTopLayer;this.add=function(){o=e.createGroup()},this.remove=function(){e.removeChild(n,o)},this.moveTopLayer=function(){if(!0!==t){var e=n.lastChild;e!==o&&n.insertBefore(o,e.nextSibling)}},this.append=function(){e.appendChild(n,o)},this.appendChild=function(i){e.appendChild(o,i)},this.removeChild=function(i){e.removeChild(o,i)},this.insertBefore=function(){o.insertBefore.apply(o,arguments)}};
},{"../../common/ElementController":25,"../../common/fp":26}],51:[function(require,module,exports) {
var t=require("../../common/ElementController"),e=require("../../common/fp");module.exports=function(i){var o=null,n=i.options.wiseFaceDetection;function l(e){t.style("color",e)(o)}!1!==n&&(e.isUndefined(n.fillColor)&&(n.fillColor="#dd2200"),e.isUndefined(n.heightRatio)&&(n.heightRatio=2.2),e.isUndefined(n.widthRatio)&&(n.widthRatio=!1),this.updateCircle=function(i,l,d){var a=d/100;"heightRatio"in n?a*=n.heightRatio:"widthRatio"in n&&(a*=n.widthRatio),e.divEq(t.style("top",l-a+"px"),t.style("left",i-a+"px"),t.style("fontSize",2*a+"px"))(o)},this.append=function(){try{document.getElementById("sketchbook").appendChild(o)}catch(t){}},this.add=function(){(o=document.createElement("span")).className="tui tui-wn5-smile",t.style("position","absolute")(o),l(n.fillColor)},this.remove=function(){try{document.getElementById("sketchbook").removeChild(o)}catch(t){}},this.changeFillColor=l)};
},{"../../common/ElementController":25,"../../common/fp":26}],63:[function(require,module,exports) {
module.exports="plus.01e90f02.svg";
},{}],64:[function(require,module,exports) {
module.exports="minus.f8a9c0a9.svg";
},{}],58:[function(require,module,exports) {
var t=require("../../common/ElementController"),e=require("../../common/fp");module.exports=function(n){var i=require("../../images/plus.svg"),o=require("../../images/minus.svg"),l=null,a=null,s=16,u=this,r=null,c=null,p=null;this.createIcon=function(u){var f=u?i:o;null===a&&(a=t.createRect(s,s),l=t.createImage(f,s,s)[0],t.setAttr("fill","#000000")(a),e.each(t.style("opacity",0))([a,l]),null!==r&&(e.each(t.style("cursor","pointer"))([a,l]),a.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),r(t)}),l.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),null!==r&&r(t)}),l.addEventListener("mouseleave",function(t){t.preventDefault(),t.stopPropagation(),null!==c&&c(t)}),l.addEventListener("contextmenu",function(t){t.preventDefault(),t.stopPropagation(),null!==p&&p(t)}))),n.appendChild(a),n.appendChild(l)},this.changePosition=function(n,i){e.divEq(t.setAttr("x",n-s/2),t.setAttr("y",i-s/2))(a),e.divEq(t.setAttr("x",n-s/2),t.setAttr("y",i-s/2))(l)},this.show=function(){e.each(t.style("opacity",1))([a,l])},this.hide=function(){null!==a&&"1"===a.style.opacity&&(e.each(t.style("opacity",0))([a,l]),u.changePosition(0,0))},this.onClick=function(t){r=t},this.onLeave=function(t){c=t},this.onContextMenu=function(t){p=t}};
},{"../../common/ElementController":25,"../../common/fp":26,"../../images/plus.svg":63,"../../images/minus.svg":64}],35:[function(require,module,exports) {
exports.MOVED_ATTR="is-moved",exports.ICON_HIDDEN_DELAY=2e3,exports.CLICK_DETECTION_TIME=100;
},{}],52:[function(require,module,exports) {
var e=require("./icon-helper"),n=require("../../common/FunnyMath"),t=require("../../common/ElementController"),i=require("../../common/fp"),o=require("../../modules/constants"),l=o.ICON_HIDDEN_DELAY;module.exports=function(o,s){"use strict";var r="is-moved",u=[],d=[],a=new e(o.groupHelper),c="0.5",h=null,p=null,f=t.setAttr("stroke",o.options.lineColor),m=f;function g(){d=o.drawModel.getPoints()}function v(e){if(clearTimeout(p),!("true"===t.getAttr(r)(s)||null!==o.selectedLineIndex||this.style.opacity===c||o.drawModel.getPointsLength()>=o.options.maxPoint)){var i=t.getPageAxis(s,e),d=i[0],f=i[1],m=null,g=null;!1!==o.options.minLineLength&&(m=o.drawModel.getAxis(this.lineIndex),g=o.drawModel.getAxis(this.lineIndex===u.length-1?0:this.lineIndex+1),n.pythagoreanTheorem(d,f,m[0],m[1])<o.options.minLineLength||n.pythagoreanTheorem(d,f,g[0],g[1])<o.options.minLineLength)||(a.changePosition(i[0],i[1]),h=this.lineIndex,a.show(),p=setTimeout(function(){a.hide()},l))}}function L(){setTimeout(function(){o.callCustomEvent("mouseup",o.getData())})}function x(e){o.callCustomEvent("linecontextmenu",e)}function y(e){e.addEventListener("contextmenu",x),!1===o.options.useOnlyRectangle&&!1===o.options.fixedRatio&&(e.addEventListener("mousemove",v),!1===o.options.fill&&(a.onContextMenu(x),e.addEventListener("mousedown",E),e.addEventListener("mouseup",L),e.addEventListener("mouseleave",function(){!0===this.isSelected&&L()})))}function E(){m(this),this.isSelected=!0,o.groupHelper.moveTopLayer(),g()}a.onClick(function(e){g(),function(e){var n=null,l=null,r=null;if(!1===function(){var e=o.drawModel.getPoints();if(d.length!==e.length)return!1;return i.pipe(i.findIndex(function(n,t){return n[0]!==e[t][0]||n[1]!==e[t][1]}),function(e){return d=[],-1===e})(d)}())return;if(o.drawModel.getPointsLength()>=o.options.maxPoint)return;n=t.getPageAxis(s,e),l=n[0],r=n[1],o.addPoint(l,r,this.lineIndex+1),L()}.call({lineIndex:h},e),a.hide()}),a.onLeave(a.hide),this.addLine=function(e,n){var i=t.createLine(o.options.lineStrokeWidth);i.lineIndex=u.length,!0===o.options.useEvent&&!1!==e&&y(i),f(i),!1!==n&&o.drawView.setCursor(i),u.push(i)},this.setDefaultColor=f,this.setSelectColor=m,this.appendAll=function(){i.each(function(e){return o.groupHelper.appendChild(e)})(u),a.createIcon(!0)},this.appendAtLast=function(){var e=u.length,n=u[e-1],t=u[e-2].nextElementSibling;o.groupHelper.insertBefore(n,t)},this.bindEvent=y,this.removeAll=function(){i.each(function(e){return o.groupHelper.removeChild(e)})(u)},this.hide=function(e){!0===o.options.fill?t.style("display","none")(e):t.style("opacity",c)(e)},this.show=function(e){!0===o.options.fill?t.style("display","inline")(e):t.style("opacity",1)(e)},this.getLines=function(){return u},this.setLines=function(e){u=e}};
},{"./icon-helper":58,"../../common/FunnyMath":38,"../../common/ElementController":25,"../../common/fp":26,"../../modules/constants":35}],53:[function(require,module,exports) {
var e=require("./icon-helper"),t=require("../../common/ElementController"),n=require("../../common/fp"),i=require("../../modules/constants"),o=i.ICON_HIDDEN_DELAY;module.exports=function(i,s){var r=!1,l=new e(i.groupHelper),u=null,c=null,a=[],d=t.setAttr("fill",i.options.pointColor),h=d;function p(e){e.onmousedown=w,e.onmouseup=function(){r=!1,!0!==i.options.customDraw&&v()},e.addEventListener("mouseleave",function(){r=!0}),!0!==i.options.fixedRatio&&(e.customContextmenu=C,e.addEventListener("contextmenu",function(e){e.preventDefault()}),e.addEventListener("mouseover",f),e.addEventListener("mouseout",g),e.addEventListener("mousedown",m))}function f(){var e=i.drawModel.getPointsLength();if(!(null!==i.selectedCircleIndex||e<=i.options.minPoint)){c=this.circleIndex;var n=parseInt(t.getAttr("x")(this)),o=parseInt(t.getAttr("y")(this)),s=parseInt(t.getAttr("width")(this)),r=parseInt(t.getAttr("height")(this));n-2*s<0?n+=2*s:n-=s,o-2*s<0?o+=2*r:o-=r,clearTimeout(u),l.changePosition(n,o),l.show()}}function m(){l.hide()}function g(){clearTimeout(u),u=setTimeout(function(){l.hide()},o)}function v(){setTimeout(function(){i.callCustomEvent("mouseup",i.getData())})}function C(e){var t=this,n=i.drawModel.getPoints(),o=n.length;e.preventDefault(),o<=i.options.minPoint||("text"===this.nodeName&&(t=a[o-1]),n.splice(t.circleIndex,1),i.drawModel.setPoints(n),i.reset(),i.init(),i.drawView.changeActiveStatus())}function w(){r=!1;var e=this,t=i.drawModel.getPointsLength();"text"===this.nodeName&&(e=a[t-1]),h(e),e.isSelected=!0,i.drawView.setCursor(s)}l.onClick(function(e){l.hide(),C.call({circleIndex:c},e),v()}),this.addCircle=function(e,n,o){var s=t.createRect(2*e,2*e);(!0===i.options.useResizeRectangle||!0===i.options.useEvent&&!1!==n)&&p(s),d(s),!1!==o&&i.drawView.setCursor(s),s.circleIndex=a.length,a.push(s)},this.bindEvent=p,this.selectCircle=w,this.setDefaultColor=d,this.setSelectColor=h,this.appendAll=function(){n.each(function(e){return i.groupHelper.appendChild(e)})(a),l.createIcon(!1)},this.changeRadius=function(e,i){n.divEq(t.setAttr("width",2*i),t.setAttr("height",2*i))(a[e])},this.appendAtLast=function(){var e=a.length,t=a[e-1],n=a[e-2].nextElementSibling;null===i.options.textInCircle||null===n?i.groupHelper.appendChild(t):i.groupHelper.insertBefore(t,n)},this.removeAll=function(){n.each(function(e){i.groupHelper.removeChild(e)})(a)},this.update=v,this.isMouseLeave=function(){return r},this.hide=t.style("display","none"),this.show=t.style("display","inline"),this.getCircles=function(){return a},this.setCircles=function(e){a=e}};
},{"./icon-helper":58,"../../common/ElementController":25,"../../common/fp":26,"../../modules/constants":35}],54:[function(require,module,exports) {
var e=require("../../common/ElementController"),t=require("../../common/fp");module.exports=function(n,o){var i=null;this.addText=function(){var o,l,r;null!==n.options.textInCircle&&(i=t.pipe(e.createText,t.divEq(e.style("fontSize","12px"),n.drawView.setCursor))(n.options.textInCircle),o=n.circleHelper.getCircles(),l=n.drawModel.getPointsLength(),r=o[l-1],i.onmousedown=r.onmousedown,i.onmouseup=r.onmouseup,!0!==n.options.fixedRatio&&i.addEventListener("contextmenu",r.customContextmenu))},this.append=function(){null!==n.options.textInCircle&&n.groupHelper.appendChild(i)},this.remove=function(){null!==n.options.textInCircle&&n.groupHelper.removeChild(i)},this.show=function(){null!==n.options.textInCircle&&e.style("display","inline")(i)},this.hide=function(){null!==n.options.textInCircle&&e.style("display","none")(i)},this.getTextTag=function(){return i},this.setTextTag=function(e){i=e}};
},{"../../common/ElementController":25,"../../common/fp":26}],55:[function(require,module,exports) {
var o=require("../../common/ElementController"),t=require("../../common/fp");module.exports=function(e,n){"use strict";var i=null;function l(){u(),i.isSelected=!0,e.groupHelper.moveTopLayer()}function s(){i.onmousedown=l,i.onmouseup=function(){!0!==e.options.customDraw&&c()},i.addEventListener("mouseleave",function(){!0===i.isSelected&&c()}),i.addEventListener("contextmenu",function(o){e.callCustomEvent("polygoncontextmenu",o)})}function u(){if(null!==i){var t=e.options.fillOpacity;t>0&&(t+=.5*t),o.style("opacity",t)}}function c(){setTimeout(function(){e.callCustomEvent("mouseup",e.getData())})}this.addPolygon=function(){i=o.createPolygon(),!0===e.options.useEvent&&s(),e.drawView.setCursor(i)},this.append=function(){!0===e.options.fill&&e.groupHelper.appendChild(i)},this.bindEvent=s,this.selectPolygon=l,this.remove=function(){!0===e.options.fill&&e.groupHelper.removeChild(i)},this.setDefaultColor=function(){!0===e.options.fill&&t.divEq(o.style("fill",e.options.fillColor),o.style("opacity",e.options.fillOpacity))(i)},this.setSelectColor=u,this.getPolygon=function(){return i},this.setPolygon=function(o){i=o}};
},{"../../common/ElementController":25,"../../common/fp":26}],59:[function(require,module,exports) {
module.exports="btn_in-out_normal.fdb8c67a.png";
},{}],60:[function(require,module,exports) {
module.exports="btn_in-out_press.dffd9e67.png";
},{}],61:[function(require,module,exports) {
module.exports="btn_all_normal.ebffad16.png";
},{}],62:[function(require,module,exports) {
module.exports="btn_all_press.815fb70d.png";
},{}],56:[function(require,module,exports) {
var e=require("../../common/ElementController"),n=require("../../common/FunnyMath"),t=require("../../common/fp");module.exports=function(r,o){"use strict";var i=25,a=33,u=require("../../images/btn_in-out_normal.png"),s=require("../../images/btn_in-out_press.png"),l=require("../../images/btn_all_normal.png"),p=require("../../images/btn_all_press.png"),d=null,c=null,f=i/2,g=a/2,m=null,h=[],v=["L","R","LR"],A=v.length,w=[],x=null;function C(n){var t;x=n,y(),t=x===v[A-1]?l:u,e.setHrefAttr(t)(c)}function y(){var o=r.drawModel.getAxis(0),i=r.drawModel.getAxis(1),a=n.getAngle(o[0],o[1],i[0],i[1]),u=a,s=x===v[1]?90:270,l=n.getLineCenter(o[0],o[1],i[0],i[1]),p=l[0],A=l[1];t.divEq(e.setAttr("x",p),e.setAttr("y",A))(c),!0!==r.options.notUseAutoChangeOfArrow&&Math.abs(a)>90&&(s=90===s?270:90,u-=180),function(r,o,i){var a=f+20,u=function(e){return n.getCosine(e)*a-4},s=function(e){return n.getSine(e)*a+6},l=[{x:u(i+180),y:s(i+180)},{x:u(i),y:s(i)}];null!==m&&(t.divEq(e.setAttr("x",r+l[0].x),e.setAttr("y",o+l[0].y))(h[0]),t.divEq(e.setAttr("x",r+l[1].x),e.setAttr("y",o+l[1].y))(h[1]))}(p,A,u),a+=s,e.setAttr("transform","rotate("+a+" "+p+" "+A+") translate("+-1*f+","+-1*g+")")(d)}!0===r.useArrow&&function(){for(var e=t.findIndex(function(e){return e===r.options.arrow.min})(v),n=t.findIndex(function(e){return e===r.options.arrow.max})(v),o=e;o<=n;o++)w.push(v[o])}(),this.addImage=function(){if(!0===r.useArrow){var n=r.options.arrow.mode===v[A-1]?l:u,o=e.createImage(n,i,a,!0);c=o[0],d=o[1],null!==r.options.arrow&&t.negate(t.isUndefined(r.options.arrow.text))&&!0===r.options.arrow.text&&(m=e.createGroup(),h[0]=e.createText("A"),h[1]=e.createText("B"),e.appendChild(m,h[0]),e.appendChild(m,h[1])),r.drawView.setCursor(c),!0===r.options.useEvent&&(c.onclick=function(e){e.stopPropagation()},c.onmousedown=function(n){n.stopPropagation();var t=x===v[A-1]?p:s;c.isSelected=!0,e.setHrefAttr(t)(c)},c.onmouseup=function(e){if(e.stopPropagation(),!0===c.isSelected){var n=function(e){var n=t.findIndex(function(n,t,r){return n===e&&r.length-1!==t})(w)+1;return v[n]}(x);c.isSelected=!1,C(n),r.callCustomEvent("mouseup",r.getData())}},c.onmouseleave=function(e){e.stopPropagation(),!0===c.isSelected&&c.onmouseup(e)}),C(r.options.arrow.mode)}},this.append=function(){null!==d&&(d.appendChild(c),r.groupHelper.appendChild(d)),null!==m&&(m.appendChild(h[0]),m.appendChild(h[1]),r.groupHelper.appendChild(m))},this.remove=function(){!0===r.useArrow&&(d.removeChild(c),r.groupHelper.removeChild(d),null!==m&&(m.removeChild(h[0]),m.removeChild(h[1]),r.groupHelper.removeChild(m)))},this.getArrow=function(){return x},this.changeArrowImage=y,this.changeArrow=C,this.show=function(){t.each(e.style("display","inline"))([c,m])},this.hide=function(){t.each(e.style("display","none"))([c,m])},this.resetData=function(){d=null,c=null,m=null,h=[]}};
},{"../../common/ElementController":25,"../../common/FunnyMath":38,"../../common/fp":26,"../../images/btn_in-out_normal.png":59,"../../images/btn_in-out_press.png":60,"../../images/btn_all_normal.png":61,"../../images/btn_all_press.png":62}],34:[function(require,module,exports) {
module.exports={bindEvent:function(n,t){return function(e){return e.addEventListener(n,t),e}},unbindEvent:function(n,t){return function(e){return e.removeEventListener(n,t),e}},bindBodyEvent:function(n,t){return this.bindEvent(n,t)(document.body)},unbindBodyEvent:function(n,t){return this.unbindEvent(n,t)(document.body)}};
},{}],40:[function(require,module,exports) {
var e=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,l=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(l)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function t(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var n=require("./group-helper"),i=require("./wise-facedetection-helper"),l=require("./line-helper"),o=require("./circle-helper"),r=require("./text-helper"),s=require("./polygon-helper"),a=require("./arrow-image-helper"),d=require("../../common/ElementController"),c=require("../../common/FunnyMath"),p=require("../../common/EventController"),u=require("../../common/fp"),g=require("../../modules/constants"),h=g.MOVED_ATTR;module.exports=function(g,f){var x=[],w=null,H=null,m=this;g.selectedCircleIndex=null,g.selectedLineIndex=null,g.groupHelper=new n(g,f),g.wiseFaceDetectionHelper=new i(g,f),g.lineHelper=new l(g,f),g.circleHelper=new o(g,f),g.textTagHelper=new r(g,f),g.polygonHelper=new s(g,f),g.arrowImageHelper=new a(g,f),this.getArrow=g.arrowImageHelper.getArrow,this.changeArrow=g.arrowImageHelper.changeArrow,this.moveTopLayer=g.groupHelper.moveTopLayer,this.changeFillColor=g.wiseFaceDetectionHelper.changeFillColor,this.changeAxis=function(){var t="",n=0,i=g.lineHelper.getLines(),l=g.circleHelper.getCircles(),o=g.textTagHelper.getTextTag(),r=g.polygonHelper.getPolygon(),s=g.drawModel.getPoints();if(u.each(function(t,n,i,l){var o=!0===g.options.fill&&n===l-1?0:n+1,r=e(s[n],2),a=r[0],c=r[1],p=e(s[o],2),h=p[0],f=p[1];u.divEq(d.setAttr("x1",a),d.setAttr("y1",c),d.setAttr("x2",h),d.setAttr("y2",f))(t)})(i),u.each(function(e,n,i,l){var r=s[n],a=r[0],c=r[1],p=parseInt(d.getAttr("width")(e)),u=parseInt(d.getAttr("height")(e));if(!1===g.options.fixedRatio&&!1===g.options.useOnlyRectangle)a-=p/2,c-=u/2;else if(!0===g.options.fixedRatio)switch(n){case g.rectangleIndex[0]:a-=p-g.options.lineStrokeWidth/2,c-=u-g.options.lineStrokeWidth/2;break;case g.rectangleIndex[1]:a-=g.options.lineStrokeWidth/2,c-=u-g.options.lineStrokeWidth/2;break;case g.rectangleIndex[2]:a-=p-g.options.lineStrokeWidth/2,c-=u-g.options.lineStrokeWidth/2;break;case g.rectangleIndex[3]:a-=p-g.options.lineStrokeWidth/2,c-=g.options.lineStrokeWidth/2}e.setAttributeNS(null,"x",a),e.setAttributeNS(null,"y",c),n===l-1&&null!==g.options.textInCircle&&(o.setAttributeNS(null,"x",r[0]-3),o.setAttributeNS(null,"y",r[1]+4)),!0===g.options.fill&&(t+=r[0]+","+r[1]+" ")})(l),!0===g.options.fill&&r.setAttributeNS(null,"points",t.replace(/[\s]{1}$/,"")),!0===g.useArrow&&g.arrowImageHelper.changeArrowImage(),!1!==g.options.wiseFaceDetection){var a=s[0],p=s[1],h=s[2],f=c.getLineCenter(p[0],p[1],h[0],h[1])[0],x=c.getLineCenter(a[0],a[1],p[0],p[1])[1];n=0,"heightRatio"in g.options.wiseFaceDetection?n=a[1]-p[1]:"widthRatio"in g.options.wiseFaceDetection&&(n=a[0]-p[0]),n=Math.abs(n),g.wiseFaceDetectionHelper.updateCircle(f,x,n)}},this.resetAllColor=function(){var e=g.lineHelper.getLines(),t=g.circleHelper.getCircles();u.each(function(e){return g.lineHelper.setDefaultColor(e)})(e),u.each(function(e){return g.lineHelper.setDefaultColor(e)})(t),g.polygonHelper.setDefaultColor()},this.setAllColor=function(){var e=g.lineHelper.getLines(),t=g.circleHelper.getCircles();u.each(function(e){return g.lineHelper.setSelectColor(e)})(e),u.each(function(e){return g.lineHelper.setSelectColor(e)})(t),g.polygonHelper.setSelectColor()},this.setCursor=function(e){d.style("cursor",g.options.useCursor?"pointer":"default")(e)},this.resetCursor=function(e){d.style("cursor","default")(e)},this.createSVGElement=function(){var e=g.options.circleRadius,t=g.drawModel.getPointsLength(),n=function(){!0===g.options.fixedRatio?g.lineHelper.addLine(!1,!1):g.lineHelper.addLine()};u.loop(function(t,i){t<i-1?n():(null!==g.options.textInCircle&&(e*=1.5),!0===g.options.fill&&(n(),g.polygonHelper.addPolygon())),!0===g.options.fixedRatio?t===g.rectangleIndex[2]?g.circleHelper.addCircle(e):g.circleHelper.addCircle(0,!1,!1):g.circleHelper.addCircle(e)})(t),g.textTagHelper.addText(),g.arrowImageHelper.addImage(),g.groupHelper.add(),!1!==g.options.wiseFaceDetection&&g.wiseFaceDetectionHelper.add()},this.appendDom=function(){g.groupHelper.append(),g.polygonHelper.append(),g.lineHelper.appendAll(),g.circleHelper.appendAll(),g.textTagHelper.append(),g.arrowImageHelper.append(),!1!==g.options.wiseFaceDetection&&g.wiseFaceDetectionHelper.append()},this.resetParentSvgAttr=function(){window.setTimeout(function(){d.setAttr(h,!1)(f)},100)},this.removeAllElement=function(){try{g.lineHelper.removeAll(),g.circleHelper.removeAll(),g.polygonHelper.remove(),g.textTagHelper.remove(),g.arrowImageHelper.remove(),!1!==g.options.wiseFaceDetection&&g.wiseFaceDetectionHelper.remove(),g.groupHelper.remove()}catch(e){}},this.addPoint=function(e,t,n){var i=g.options.circleRadius,l=g.drawModel.getPointsLength();u.negate(u.isUndefined(n))?g.drawModel.addAxis(e,t,n):g.drawModel.addAxis(e,t),g.lineHelper.addLine(),g.lineHelper.appendAtLast(),null!==g.options.textInCircle&&(i*=1.5),g.circleHelper.addCircle(i),g.circleHelper.changeRadius(l-1,g.options.circleRadius),g.circleHelper.appendAtLast(),g.changeAxis(),g.drawModel.isAllSelected&&g.setAllColor()},this.callCustomEvent=function(e,t){var n="";!0!==g.options.useResizeRectangle&&!0!==g.options.useEvent||null===g.options.event||!1!==g.options.customDraw||e in g.options.event&&(n=!0===Array.isArray(t)?"apply":"call",g.options.event[e][n](g,t))},this.createArrow=function(e){g.useArrow=!0,g.options.arrow=u.clone(e),g.arrowImageHelper.addImage(),g.changeAxis(),g.arrowImageHelper.append()},this.toggleDraggingStatus=function(e){var t=!0===e?"add":"remove";document.body.classList[t]("svg-geometry")},this.resetElementStatus=function(){var e=g.lineHelper.getLines(),t=g.circleHelper.getCircles(),n=g.polygonHelper.getPolygon();null!==g.selectedLineIndex&&(e[g.selectedLineIndex].isSelected=!1,g.selectedLineIndex=null),null!==g.selectedCircleIndex&&(t.forEach(function(e){!0===e.isSelected&&(e.isSelected=!1)}),g.selectedCircleIndex=null),!0===g.options.fill&&(n.isSelected=!1,H=null),!1===g.drawModel.isAllSelected&&g.resetAllColor(),m.resetCursor(f),!0===g.options.fixedRatio&&(x=[]),w=null},this.parentSVGMouseUpHandle=function(){m.toggleDraggingStatus(!1),null!==g.selectedCircleIndex&&g.circleHelper.isMouseLeave()&&g.circleHelper.update(),null!==g.selectedLineIndex&&m.callCustomEvent("mouseup",g.getData()),m.resetElementStatus(),m.resetParentSvgAttr()},this.parentSVGMouseDownHandle=function(e){var t=g.circleHelper.getCircles(),n=(g.lineHelper.getLines(),g.polygonHelper.getPolygon()),i=function(e){return e.isSelected};w=d.getPageAxis(f,e),u.pipe(u.findIndex(i),function(e){e>-1&&(g.selectedCircleIndex=e)})(t),null===g.selectedCircleIndex&&!1===g.options.fixedRatio&&u.pipe(u.findIndex(i),function(e){e>-1&&(g.selectedLineIndex=e)}),!0===g.options.fixedRatio&&!1!==g.options.ratio?x=g.options.ratio:null!==g.selectedCircleIndex&&!0===g.options.fixedRatio&&(x=[g.options.points[2][0]-g.options.points[0][0],g.options.points[2][1]-g.options.points[0][1]]),!0===g.options.fill&&!0===n.isSelected&&(H=!0),!0===g.options.customDraw?(g.selectedCircleIndex=!0===g.options.useOnlyRectangle||!0===g.options.useRectangleForCustomDraw?2:t.length-1,m.toggleDraggingStatus(!0)):null===g.selectedCircleIndex&&null===g.selectedLineIndex&&null===H||(d.setAttr(h,!0)(f),m.toggleDraggingStatus(!0))};this.parentSVGMouseMoveHandle=function(n){if(!0===g.options.customDraw&&null===g.selectedCircleIndex&&m.parentSVGMouseDownHandle(n),null!==g.selectedCircleIndex||null!==g.selectedLineIndex||null!==H||!1!==g.options.customDraw){var i=d.getPageAxis(f,n),l=i[0],o=i[1],r=l-w[0],s=o-w[1],a=d.getSVGOffset(f)().width,p=d.getSVGOffset(f)().height,h=g.drawModel.getAxis(g.rectangleIndex[0]),v=g.drawModel.getAxis(g.rectangleIndex[2]),A=[],I=g.drawModel.getPointsLength(),S=0,C=0,y=0,M=0,L=null,D=[],b=[],R=null;if(null!==g.selectedCircleIndex)if(l<0?l=0:l>a&&(l=a),o<0?o=0:o>p&&(o=p),!0===g.options.fixedRatio||!0===g.options.useRectangleForCustomDraw){var E=[];if(E=!0===g.options.useOnlyRectangle||!0===g.options.useRectangleForCustomDraw?function(t){var n=g.drawModel.getAxis(g.rectangleIndex[0]),i=e(n,2),l=i[0],o=i[1],r=d.getPageAxis(f,t),s=e(r,2),a=s[0],c=s[1],p=g.drawModel.getAxis(g.rectangleIndex[2]);return m.validateGeometrySize(Math.abs(l-a),Math.abs(o-p[1]))||(a=p[0]),m.validateGeometrySize(Math.abs(l-p[0]),Math.abs(o-c))||(c=p[1]),[l,o,a,c]}(n):function(e){var t=d.getPageAxis(f,e),n=t[0],i=t[1],l=g.drawModel.getAxis(g.rectangleIndex[0]),o=n-w[0],r=i-w[1],s=Math.abs(o)+Math.abs(r),a=x[0]/(x[1]+x[0])*s;(o<0||r<0)&&(a*=-1);var c=l[0],p=n+a,u=l[1],h=u+(p-c)*x[1]/x[0];if(!1===g.drawModel.validateAxis(p,h)){if(!(0===c&&0===u&&p>0&&h>0))return;p=g.options.maxSize.width,h=g.options.maxSize.height}if(m.validateGeometrySize(Math.abs(c-p),Math.abs(u-h)))return[c,u,p,h]}(n),u.isUndefined(E)||!1===g.options.useRectangleForCustomDraw&&(h[0]>E[2]||h[1]>E[3]))return;m.changeRectangle.apply(m,t(E))}else{var P=[],G=0,T=0;if(!1===g.options.customDraw&&!1!==g.options.minLineLength){D=g.circleHelper.getCircles(),!1===g.options.fill&&0===g.selectedCircleIndex||(G=0===g.selectedCircleIndex?D.length-1:g.selectedCircleIndex-1,P.push(g.drawModel.getAxis(G))),!1===g.options.fill&&g.selectedCircleIndex===D.length-1||(T=g.selectedCircleIndex===D.length-1?0:g.selectedCircleIndex+1,P.push(g.drawModel.getAxis(T)));for(var F=0,V=P.length;F<V;F++)if(L=P[F],c.pythagoreanTheorem(l,o,L[0],L[1])<g.options.minLineLength)return}if((A=g.drawModel.getPoints())[g.selectedCircleIndex]=[l,o],!1===g.validateStabilization(A))return;g.drawModel.setAxis(g.selectedCircleIndex,l,o)}else if(!0===g.options.fill&&null!==g.selectedLineIndex){b=g.lineHelper.getLines();var z=g.drawModel.getAxis(g.selectedLineIndex),q=!0===g.options.fill&&g.selectedLineIndex===b.length-1?0:g.selectedLineIndex+1,k=g.drawModel.getAxis(q);if(S=z[0]+r,y=z[1]+s,C=k[0]+r,M=k[1]+s,!1!==g.drawModel.validateAxis(S,y)&&!1!==g.drawModel.validateAxis(C,M)||(S=z[0],y=z[1],C=k[0],M=k[1]),(A=g.drawModel.getPoints())[g.selectedLineIndex]=[S,y],A[q]=[C,M],!1===g.validateStabilization(A))return;g.drawModel.setAxis(g.selectedLineIndex,S,y),g.drawModel.setAxis(q,C,M)}else if(!0===g.options.fill||null!==g.selectedLineIndex){var O=!1;O=null!==(R=g.polygonHelper.getPolygon())?!0===R.isSelected:null!==g.selectedLineIndex,!0!==g.options.useOnlyRectangle&&!0!==g.options.fixedRatio||((h[0]+r<0||v[0]+r>a)&&(r=0),(h[1]+s<0||v[1]+s>p)&&(s=0)),!1===g.drawModel.validateAllPoint(r,0)&&(r=0),!1===g.drawModel.validateAllPoint(0,s)&&(s=0),O&&u.loop(function(e){var t=g.drawModel.getAxis(e);g.drawModel.setAxis(e,t[0]+r,t[1]+s)})(I)}w=[l,o],g.changeAxis()}},this.bindEvent=function(){!0!==g.options.useResizeRectangle&&!0!==g.options.useEvent&&!0!==g.options.customDraw||(w=null,p.bindBodyEvent("mousedown",m.parentSVGMouseDownHandle),p.bindBodyEvent("mousemove",m.parentSVGMouseMoveHandle),p.bindBodyEvent("mouseup",m.parentSVGMouseUpHandle),p.bindBodyEvent("mouseleave",m.parentSVGMouseUpHandle))},this.init=function(){m.createSVGElement(),!0===g.options.initCenter&&g.drawModel.alignCenter(),g.changeAxis(),g.resetAllColor(),m.bindEvent(),m.appendDom()},this.reset=function(){m.removeAllElement(),m.unbindEvent(),g.lineHelper.setLines([]),g.circleHelper.setCircles([]),g.polygonHelper.setPolygon(null),g.textTagHelper.setTextTag(null),g.arrowImageHelper.resetData()},this.unbindEvent=function(){p.unbindBodyEvent("mousedown",m.parentSVGMouseDownHandle),p.unbindBodyEvent("mousemove",m.parentSVGMouseMoveHandle),p.unbindBodyEvent("mouseup",m.parentSVGMouseUpHandle),p.unbindBodyEvent("mouseleave",m.parentSVGMouseUpHandle)},this.endDraw=function(){g.options.customDraw=!1,g.options.useRectangleForCustomDraw=!1,m.resetElementStatus(),m.resetParentSvgAttr()},this.changeRectangleToSize=function(e,t){if(!0===g.options.useOnlyRectangle||!0===g.options.fixedRatio){var n=g.drawModel.getAxis(0),i=g.drawModel.getAxis(2),l=d.getSVGOffset(f)(),o=0,r=0,s=0,a=0;i[0]>=l.width?(o=i[0]-e,r=i[0]):(o=n[0],r=n[0]+e),i[1]>=l.height?(s=i[1]-t,a=i[1]):(s=n[1],a=n[1]+t),m.changeRectangle(o,s,r,a,!0),g.changeAxis()}},this.changeRectangle=function(e,t,n,i,l){!0===l&&g.drawModel.setAxis(0,e,t),g.drawModel.setAxis(g.rectangleIndex[1],e,i),g.drawModel.setAxis(g.rectangleIndex[2],n,i),g.drawModel.setAxis(g.rectangleIndex[3],n,t)},this.changeNormalStatus=function(){var e=g.lineHelper.getLines(),t=g.circleHelper.getCircles();e.forEach(function(e){g.lineHelper.hide(e)}),t.forEach(function(e){g.circleHelper.hide(e)}),!0===g.useArrow&&g.arrowImageHelper.hide(),g.textTagHelper.hide(),g.resetAllColor()},this.changeActiveStatus=function(){var e=g.lineHelper.getLines(),t=g.circleHelper.getCircles();e.forEach(function(e){g.lineHelper.show(e)}),t.forEach(function(e){g.circleHelper.show(e)}),!0===g.useArrow&&g.arrowImageHelper.show(),g.textTagHelper.show(),g.setAllColor()},this.validateGeometrySize=function(e,t){return(!u.negate(u.isUndefined(g.options.minSize))||!(e<g.options.minSize.width||t<g.options.minSize.height))&&(!u.negate(u.isUndefined(g.options.maxSize))||!(e>g.options.maxSize.width||t>g.options.maxSize.height))}};
},{"./group-helper":50,"./wise-facedetection-helper":51,"./line-helper":52,"./circle-helper":53,"./text-helper":54,"./polygon-helper":55,"./arrow-image-helper":56,"../../common/ElementController":25,"../../common/FunnyMath":38,"../../common/EventController":34,"../../common/fp":26,"../../modules/constants":35}],30:[function(require,module,exports) {
"use strict";var e=require("../../common/FunnyMath"),i=require("./DrawModel"),n=require("./DrawView"),t=require("../../common/fp");module.exports=function(o,r){var a=this,l=1;function d(i){var n=[],o=0;try{if((o=(n=t.isUndefined(i)?t.clone(a.drawModel.getPoints()):t.clone(i)).length)>=3&&!0===a.options.fill){if(Math.abs(e.getVertextAngle(n[0],n[1],n[2]))<l)return!1;t.loop(function(){n.push(n.shift())})(o)}}catch(e){console.warn(e)}return!0}function w(i){var n=!0,o=0,r=0;if(!1!==a.options.fill&&!0!==a.options.fixedRatio){try{r=(o=t.isUndefined(i)?t.clone(a.drawModel.getPoints()):t.clone(i)).length;for(var l=0;l<r-1;l++)for(var d=o[l],w=o[l+1],c=l+1;c<r;c++){var s=o[c],u=o[c+1===r?0:c+1];if(!1===e.checkLineIntersection(d[0],d[1],w[0],w[1],s[0],s[1],u[0],u[1])){n=!1;break}}}catch(e){console.info(e)}return n}}a.options=t.merge({fillColor:"#cccccc",lineColor:"#cccccc",pointColor:"#cccccc",points:[[0,0],[100,100]],lineStrokeWidth:3,circleRadius:5,minLineLength:30,textInCircle:null,arrow:null,useEvent:!1,useResizeRectangle:!1,notUseMoveTopLayer:!1,useCursor:!1,useOnlyRectangle:!1,useRectangleForCustomDraw:!1,fill:!1,fillOpacity:.5,fixedRatio:!1,ratio:!1,event:{},customDraw:!1,minSize:{width:30,height:30},maxSize:!1,minPoint:4,maxPoint:8,initCenter:!1,mirror:!1,flip:!1,notUseAutoChangeOfArrow:!1,wiseFaceDetection:!1},r),a.useArrow=!0,null===a.options.arrow?a.useArrow=!1:""===a.options.arrow.mode&&(a.useArrow=!1),!0===a.options.useOnlyRectangle&&(a.options.fixedRatio=!0),a.drawModel=new i(a,o),a.drawView=new n(a,o),a.rectangleIndex=a.drawModel.getRectangleIndex(),a.callCustomEvent=a.drawView.callCustomEvent,a.init=a.drawView.init,a.addPoint=a.drawView.addPoint,a.hide=a.drawView.removeAllElement,a.show=a.drawView.appendDom,a.active=a.drawView.changeActiveStatus,a.normal=a.drawView.changeNormalStatus,a.getData=function(){return{points:a.drawModel.getPoints(),arrow:a.drawView.getArrow()}},a.reset=a.drawView.reset,a.destroy=a.drawView.reset,a.endDraw=a.drawView.endDraw,a.createArrow=a.drawView.createArrow,a.changeArrow=a.drawView.changeArrow,a.changeMinSizeOption=a.drawModel.changeMinSizeOption,a.changeMaxSizeOption=a.drawModel.changeMaxSizeOption,a.changeRectangleToSize=a.drawView.changeRectangleToSize,a.modifyPoints=a.drawModel.modifyPoints,a.alignCenter=a.drawModel.alignCenter,a.validateAxis=a.drawModel.validateAxis,a.stopEvent=a.drawView.unbindEvent,a.startEvent=a.drawView.bindEvent,a.moveTopLayer=a.drawView.moveTopLayer,a.changeWFDFillColor=a.drawView.changeFillColor,a.changeAxis=a.drawView.changeAxis,a.resetAllColor=function(){a.drawView.resetAllColor(),a.drawModel.setIsAllSelectedState(!1)},a.setAllColor=function(){a.drawView.setAllColor(),a.drawModel.setIsAllSelectedState(!0)},a.validateStabilization=function(e){var i=t.isUndefined(e)?t.clone(a.drawModel.getPoints()):t.clone(e),n=!0;!1!==d(i)&&!1!==w(i)||(n=!1);return n},a.validateIntersection=w,a.validateMinimumAngle=d,a.drawView.init()};
},{"../../common/FunnyMath":38,"./DrawModel":39,"./DrawView":40,"../../common/fp":26}],57:[function(require,module,exports) {
var n=function(){function n(n,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(t,o,r){return o&&n(t.prototype,o),r&&n(t,r),t}}();function t(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}var o=require("../draw"),r=function(n,t,o,r){return[[n,t],[n,r],[o,r],[o,t]]},e=function(n,t){"start"in n.event&&n.event.start(t)},i=function(n,t){"end"in n.event&&n.event.end(t)},u=function(){return{obj:null,currentPoint:0,options:null}},s=function(n,t,r,i){var u=new o(n,t);return e(t,u),{obj:u,currentPoint:++i}},c=function(n,t){return n.endDraw(),i(t,n),u()},a=function(n){return n.destory(),u()},f=function(n){return 0===n},l=function(){function o(n){t(this,o);var r=u(),e=r.obj,i=r.currentPoint,s=r.options;this._rootSVG=n,this._obj=e,this._currentPoint=i,this._options=s}return n(o,[{key:"start",value:function(n,t){this._options=n;var o=s(this._rootSVG,n,t,this._currentPoint),r=o.obj,e=o.currentPoint;this._obj=r,this._currentPoint=e}},{key:"end",value:function(){var n=c(this._obj,this._options),t=n.obj,o=n.currentPoint,r=n.options;this._obj=t,this._currentPoint=o,this._options=r}},{key:"add",value:function(){}},{key:"isLast",value:function(){}},{key:"isFirst",value:function(){return f(this._currentPoint)}},{key:"destroy",value:function(){var n=a(this._obj),t=n.obj,o=n.currentPoint,r=n.options;this._obj=t,this._currentPoint=o,this._options=r}},{key:"convertRectanglePoints",value:function(){return r.apply(void 0,arguments)}}]),o}();module.exports=l;
},{"../draw":30}],41:[function(require,module,exports) {
var t=function(){function t(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,o,r){return o&&t(e.prototype,o),r&&t(e,r),e}}(),e=function t(e,o,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,o,r)}if("value"in n)return n.value;var u=n.get;return void 0!==u?u.call(r):void 0};function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var i=require("./state"),u=function(u){function a(t){return o(this,a),r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t))}return n(a,i),t(a,[{key:"start",value:function(t,o){var r=[];r=!1===t.minSize?this.convertRectanglePoints(o[0],o[1],o[0]+t.ratio[0],o[1]+t.ratio[1]):this.convertRectanglePoints(o[0],o[1],o[0]+t.minSize.width,o[1]+t.minSize.height),t.points=r,e(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"start",this).call(this,t,o)}},{key:"end",value:function(){e(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"end",this).call(this)}},{key:"isLast",value:function(){return 0!==this._currentPoint}}]),a}();module.exports=u;
},{"./state":57}],42:[function(require,module,exports) {
var t=function(){function t(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,o,r){return o&&t(e.prototype,o),r&&t(e,r),e}}(),e=function t(e,o,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,o,r)}if("value"in n)return n.value;var u=n.get;return void 0!==u?u.call(r):void 0};function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var i=require("./state"),u=function(u){function c(t){return o(this,c),r(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,t))}return n(c,i),t(c,[{key:"start",value:function(t,o){t.points=this.convertRectanglePoints(o[0],o[1],o[0],o[1]),e(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"start",this).call(this,t,o)}},{key:"end",value:function(){e(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"end",this).call(this)}},{key:"isLast",value:function(){return 0!==this._currentPoint}}]),c}();module.exports=u;
},{"./state":57}],43:[function(require,module,exports) {
var t=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),e=function t(e,n,o){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,o)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(o):void 0};function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=require("./state"),a=require("../../common/FunnyMath"),u=require("../../common/fp"),l=function(l){function s(t){return n(this,s),o(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,t))}return i(s,r),t(s,[{key:"start",value:function(t,n){t.points=[n,n],e(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"start",this).call(this,t,n),this._currentPoint=2}},{key:"end",value:function(){e(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"end",this).call(this)}},{key:"add",value:function(t){!1!==this.validateAllAxis(this._options.minLineLength)&&(this._currentPoint>2&&!1===this._obj.validateStabilization()||(this._obj.addPoint(t[0],t[1]),this._currentPoint++))}},{key:"isLast",value:function(){return this._currentPoint===this._options.minPoint&&(!1!==this.validateAllAxis(this._options.minLineLength)&&!1!==this._obj.validateStabilization())}},{key:"validateAllAxis",value:function(){var t=this,e=this._obj.getData().points,n=a.pythagoreanTheorem;return!u.find(function(e,o,i){var r=o===i.length-1?i[0]:i[o+1];if(n(e[0],e[1],r[0],r[1])<t._options.minLineLength)return!0})(e)}}]),s}();module.exports=l;
},{"./state":57,"../../common/FunnyMath":38,"../../common/fp":26}],31:[function(require,module,exports) {
"use strict";var e=require("../../common/EventController"),n=require("../../common/ElementController"),t=require("../../common/fp"),i=require("./fixed_ratio_state"),r=require("./ractangle_state"),o=require("./line_state"),u=require("../../modules/constants"),c=u.MOVED_ATTR,a=function(e){return!0===e.useOnlyRectangle?!0===e.fixedRatio?i:r:o},s=function(e){var n=t.merge({minPoint:4,event:{},fixedRatio:!1,useOnlyRectangle:!1,ratio:!1,minLineLength:20,minSize:!1},e);return n.fixedRatio&&(n.useOnlyRectangle=!0),n.customDraw=!0,n},d=function(n,t,i){return e.bindEvent(t,i)(n),function(){e.unbindEvent(t,i)(n)}},f=function(e,t,i){var r=void 0,o=void 0,u=function(){!1===t.isFirst()&&(t.destroy(),s())},a=function(){r=d(e,"contextmenu",u),o=d(document,"keyup",function(e){27===e.keyCode&&u()})},s=function(){r(),o()};return d(e,"click",function(r){if("true"!==n.getAttr(c)(e)){var o=n.getPageAxis(e,r);t.isFirst()?(a(),t.start(i,o)):t.isLast()?(s(),t.end()):t.add(o)}})};module.exports=function(e,n){var t=s(n),i=new(a(t))(e);return{destroy:f(e,i,t)}};
},{"../../common/EventController":34,"../../common/ElementController":25,"../../common/fp":26,"./fixed_ratio_state":41,"./ractangle_state":42,"./line_state":43,"../../modules/constants":35}],24:[function(require,module,exports) {
"use strict";var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),t=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0};function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=require("./customeditor"),a=require("./draw"),u=require("../common/EventController"),s=require("../common/ElementController"),l=require("../common/fp"),c=require("../modules/constants"),v=c.MOVED_ATTR,p=c.CLICK_DETECTION_TIME,h=function(c){function h(e,t){n(this,h);var o=r(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,e,t));return o._mouseDownTimer=null,o._svgObj=null,o}return o(h,i),e(h,[{key:"unbindEvent",value:function(){l.divEq(u.unbindEvent("click",this.parentSVGClickHandle),u.unbindEvent("mousedown",this.parentSVGMouseDownHandle),u.unbindEvent("mouseup",this.parentSVGMouseUpHandle))(this._rootSVG)}},{key:"createParentSVGClickHandle",value:function(){var e=this,n=t(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"createParentSVGClickHandle",this).call(this);return function(t){e._options.useRectangleForCustomDraw=!1,n(t)}}},{key:"bindEvent",value:function(){this.parentSVGMouseDownHandle=this.createParentSVGMouseDownHandle(),this.parentSVGMouseUpHandle=this.createParentSVGMouseUpHandle(),this.parentSVGClickHandle=this.createParentSVGClickHandle(),l.divEq(u.bindEvent("mousedown",this.parentSVGMouseDownHandle),u.bindEvent("mouseup",this.parentSVGMouseUpHandle))(this._rootSVG)}},{key:"bindCancelEvent",value:function(){this.bindContextMenu(),document.addEventListener("keyup",this.handleESCKey)}},{key:"unbindCancelEvent",value:function(){this.unbindContextMenu(),document.removeEventListener("keyup",this.handleESCKey)}},{key:"removeDrawingGeometry",value:function(){t(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"removeDrawingGeometry",this).call(this),!1===this._state.isFirst()&&this.restartDrawing()}},{key:"restartDrawing",value:function(){this.unbindCancelEvent(),this.unbindEvent(),this.bindEvent()}},{key:"endDraw",value:function(){t(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"endDraw",this).call(this),this.restartDrawing()}},{key:"endDragEvent",value:function(){this._svgObj.endDraw(),this.unbindCancelEvent(),this.restartDrawing(),this._svgObj=null}},{key:"createParentSVGMouseUpHandle",value:function(){var e=this;return function(t){if(null!==e._mouseDownTimer)e.abortCheckingDragEvent(t);else{var n=2===t.buttons,r="true"===s.getAttr(v)(e._rootSVG);n||r||null===e._svgObj||e.endDragEvent()}}}},{key:"abortCheckingDragEvent",value:function(e){window.clearTimeout(this._mouseDownTimer),this._mouseDownTimer=null,this.parentSVGClickHandle(e),l.divEq(u.unbindEvent("mousedown",this.parentSVGMouseDownHandle),u.unbindEvent("mouseup",this.parentSVGMouseUpHandle),u.bindEvent("click",this.parentSVGClickHandle))(this._rootSVG)}},{key:"createParentSVGMouseDownHandle",value:function(){var e=this;return function(t){var n=2===t.buttons,r=t.currentTarget!==t.target,o="true"===s.getAttr(v)(e._rootSVG);n||r||o||e.startCheckingDragEvent(t)}}},{key:"startCheckingDragEvent",value:function(e){var t=this;window.clearTimeout(this._mouseDownTimer),this._mouseDownTimer=window.setTimeout(function(e){return t.startDragEvent(e)},p,s.getPageAxis(this._rootSVG,e))}},{key:"startDragEvent",value:function(e){this._mouseDownTimer=null,this._options.points=[e,[e[0],e[1]+30],[e[0]+30,e[1]+30],[e[0]+30,e[1]]],this._options.useRectangleForCustomDraw=!0,this._svgObj=new a(this._rootSVG,this._options),this.bindCancelEvent()}}]),h}();module.exports=h;
},{"./customeditor":31,"./draw":30,"../common/EventController":34,"../common/ElementController":25,"../common/fp":26,"../modules/constants":35}],17:[function(require,module,exports) {
"use strict";var e=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}();function r(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var t=require("../plugins/draw"),n=require("../plugins/customeditor"),o=require("../plugins/svg_geometry_plugin_customeditor_v2"),u=require("../common/ElementController"),i=require("../common/fp"),s=function(){function o(e){r(this,o),i.divEq(u.setAttr("draggable",!1),u.style("cursor","normal"),u.style("userSelect","none"),u.style("mozUserSelect","none"),u.style("webkitUserSelect","none"),u.style("msUserSelect","none"))(e),this._rootSVG=e}return e(o,[{key:"draw",value:function(e){return new t(this._rootSVG,e)}},{key:"customEditor",value:function(e){return n(this._rootSVG,e)}},{key:"customEditorV2",value:function(e){return this.customEditor(e)}}]),o}();module.exports=s;
},{"../plugins/draw":30,"../plugins/customeditor":31,"../plugins/svg_geometry_plugin_customeditor_v2":24,"../common/ElementController":25,"../common/fp":26}],12:[function(require,module,exports) {
var n=require("../src/modules/svg_geometry");module.exports=function(){var o=document.getElementById("svg_polygon"),e=new n(o),t=null;function i(){var n=t.getData(),o=document.getElementById("svg_polygon_log");o.innerHTML="";for(var e=0,i=n.points.length;e<i;e++){var r=n.points[e];o.innerHTML+="["+r[0]+","+r[1]+"]",e<i-1&&(o.innerHTML+=",")}}return{draw:function(){t=e.draw({fillColor:"#ff6633",lineColor:"#ff6633",pointColor:"#ff6633",lineStrokeWidth:5,circleRadius:6,fill:!0,points:[[156.5,370],[239.5,304],[321.5,366],[286.5,271],[370.5,220],[271.5,221],[238.5,125],[210.5,222],[114.5,225],[197.5,272]],minPoint:2,maxPoint:10,useEvent:!0,useCursor:!0,event:{mouseup:i,polygoncontextmenu:function(){alert("polygoncontextmenu")}}})},addPoint:function(){t.addPoint()},getPoints:i}};
},{"../src/modules/svg_geometry":17}],13:[function(require,module,exports) {
var n=require("../src/modules/svg_geometry");module.exports=function(){var e=document.getElementById("svg_privacy_polygon"),t=document.getElementById("svg_privacy_polygon_list"),o=new n(e),r=[],i=null,a={lineStrokeWidth:5,circleRadius:8,useEvent:!0,maxPoint:8,fill:!0,fillOpacity:0,event:{end:function(n){l(n),c()},mouseup:c}};function l(n){r.push(n),t.innerHTML="";for(var e=0,o=r.length;e<o;e++)t.innerHTML+="<option>"+e+"</option>"}function u(){null===i&&(i=o.customEditor(a))}function c(){for(var n=document.getElementById("svg_privacy_polygon_log"),e="",t=0,o=r.length;t<o;t++){var i=r[t].getData().points;e+="index : "+t+" data: ";for(var a=0,l=i.length;a<l;a++)e+="["+i[a][0]+", "+i[a][1]+"],";e+="<br>"}n.innerHTML=e}return{selectShape:function(){for(var n=0,e=r.length;n<e;n++){var o=parseInt(t.value)===n?"active":"normal";r[n][o]()}},init:function(){u(),a.points=[[219,59],[80,109],[96,238],[190,189]],l(o.draw(a)),a.points=[[363,81],[302,133],[348,217],[466,160]],l(o.draw(a))},startDrawing:u,stopDrawing:function(){null!==i&&(i.destroy(),i=null)},addPoint:function(){var n=parseInt(t.value);r[n].addPoint()},removeDrawingGeometry:function(){null!==i&&i.removeDrawingGeometry()}}};
},{"../src/modules/svg_geometry":17}],14:[function(require,module,exports) {
var e=require("../src/modules/svg_geometry");module.exports=function(){var t=document.getElementById("svg_privacy_rectangle"),n=new e(t),i=[],a={width:50,height:50},r={width:250,height:250},g=function(){for(var e=document.getElementById("svg_privacy_rectangle_log"),t="",n=0,a=i.length;n<a;n++){var r=i[n].getData().points;t+="index : "+n+" data: ";for(var g=0,o=r.length;g<o;g++)t+="["+r[g][0]+", "+r[g][1]+"],";t+="<br>"}e.innerHTML=t};return{startDrawing:function(){var e={lineStrokeWidth:5,circleRadius:8,useEvent:!1,useResizeRectangle:!0,fill:!0,fillOpacity:0,fixedRatio:!0,minSize:a,maxSize:r,ratio:[1,1],event:{mouseup:g}};e.event.end=function(e){i.push(e),g()},e.wiseFaceDetection={strokeWidth:2,strokeColor:"#dd5500",fillOpacity:0,heightRatio:2.2},n.customEditor(e),e.points=[[0,0],[0,100],[100,100],[100,0]],i.push(n.draw(e))},changeMinMaxSize:function(){var e=document.getElementById("svg_privacy_rectangle_min"),t=document.getElementById("svg_privacy_rectangle_max");a.width=a.height=parseInt(e.value),r.width=r.height=parseInt(t.value);for(var n=0,g=i.length;n<g;n++){var o=i[n];o.changeMinSizeOption(a),o.changeMaxSizeOption(r)}},changeRectangleToMinSize:function(){for(var e=0,t=i.length;e<t;e++)i[e].changeRectangleToSize(a.width,a.height)},changeRectangleToMaxSize:function(){for(var e=0,t=i.length;e<t;e++)i[e].changeRectangleToSize(r.width,r.height)}}};
},{"../src/modules/svg_geometry":17}],15:[function(require,module,exports) {
var o=require("../src/modules/svg_geometry");module.exports=function(){var i=document.getElementById("svg_line"),e=new o(i),n=[];return{draw:function(){n.push(e.draw({lineColor:"#ff6633",pointColor:"#ff6633",lineStrokeWidth:4,circleRadius:6,minPoint:2,maxPoint:8,points:[[70,242],[362,380]],useEvent:!0})),n.push(e.draw({lineColor:"#ff6633",pointColor:"#ff6633",lineStrokeWidth:4,circleRadius:6,minPoint:2,maxPoint:8,points:[[70,270],[380,270]],useEvent:!0})),e.customEditor({lineColor:"#ff6633",pointColor:"#ff6633",lineStrokeWidth:4,circleRadius:6,minPoint:2,maxPoint:8,useEvent:!0})}}};
},{"../src/modules/svg_geometry":17}],16:[function(require,module,exports) {
var e=require("../src/modules/svg_geometry");module.exports=function(){var o=document.getElementById("svg_fixed_ratio"),i=new e(o),r=[];return{draw:function(){r.push(i.draw({fillColor:"#7fa9e3",lineColor:"#7fa9e3",pointColor:"#7fa9e3",lineStrokeWidth:4,circleRadius:8,useCursor:!0,fill:!0,points:[[10,10],[10,100],[130,100],[130,10]],fixedRatio:!0,useEvent:!0})),r.push(i.draw({fillColor:"#e38d7f",lineColor:"#e38d7f",pointColor:"#e38d7f",lineStrokeWidth:4,circleRadius:8,useCursor:!0,fill:!0,points:[[200,10],[200,210],[400,210],[400,10]],fixedRatio:!0,useEvent:!0})),r.push(i.draw({fillColor:"#7fe3a8",lineColor:"#7fe3a8",pointColor:"#7fe3a8",lineStrokeWidth:4,circleRadius:8,useCursor:!0,fill:!0,points:[[100,250],[100,430],[460,430],[460,250]],fixedRatio:!0,useEvent:!0}))},alignCenter:function(){for(var e=0,o=r.length;e<o;e++)r[e].alignCenter()}}};
},{"../src/modules/svg_geometry":17}],7:[function(require,module,exports) {
var e=require("./src/modules/svg_geometry"),n=require("./scripts/polygon.js"),i=require("./scripts/uwa_privacy_polygon.js"),o=require("./scripts/uwa_privacy_rectangle.js"),r=require("./scripts/line.js"),t=require("./scripts/fixedratio.js"),l=null,a=null;function c(e){return document.getElementById(e)}window.onload=function(){var e=new n;e.draw(),c("svg_polygon_add_point").onclick=e.addPoint,c("svg_polygon_get_point").onclick=e.getPoints;var l=new t;l.draw(),c("svg_fixed_ratio_btn").onclick=l.alignCenter,(new r).draw();var a=new i;a.init(),c("svg_privacy_polygon_remove_drawing_geometry").onclick=a.removeDrawingGeometry,c("svg_privacy_polygon_stop_drawing").onclick=a.stopDrawing,c("svg_privacy_polygon_start_drawing").onclick=a.startDrawing,c("svg_privacy_polygon_list").onchange=a.selectShape,c("svg_privacy_polygon_add_point").onclick=a.addPoint;var u=new o;u.startDrawing(),c("svg_privacy_rectangle_min").onchange=u.changeMinMaxSize,c("svg_privacy_rectangle_max").onchange=u.changeMinMaxSize,c("svg_privacy_rectangle_change_min").onclick=u.changeRectangleToMinSize,c("svg_privacy_rectangle_change_max").onclick=u.changeRectangleToMaxSize};var u={red:"#CE534D",blue:"#3184F9",includeArea:{fill:"#ff6633",line:"#ff6633",point:"#ff6633"},excludeArea:{fill:"#000000",line:"#ffffff",point:"#999999"}};function d(){return{fillColor:u.includeArea.fill,lineColor:u.includeArea.line,pointColor:u.includeArea.point,lineStrokeWidth:4,circleRadius:5,useEvent:!0,useCursor:!0,minPoint:4,maxPoint:8,fill:!0,fillOpacity:"0.2"}}function s(){return{fillColor:u.includeArea.fill,lineColor:u.includeArea.line,pointColor:u.includeArea.point,lineStrokeWidth:4,circleRadius:6,useEvent:!0,useCursor:!0,minPoint:2,maxPoint:8,arrow:{mode:"R",min:"L",max:"LR",text:!0}}}window.addEventListener("load",function(){var n=document.getElementById("wfd_roi"),i=new e(n),o=d();o.points=[[0,0],[0,480],[854,480],[854,0]],o.ratio=[1.77,1],o.fixedRatio=!0,o.wiseFaceDetection={strokeWidth:2,strokeColor:u.includeArea.line,fillOpacity:0,heightRatio:4},i.draw(o);var r=document.getElementById("roi"),t=new e(r),l=d(),a=[],c=function(e){for(var n=0,i=a.length;n<i;n++)a[n].normal();e.active()},g=[[[686,319],[455,333],[465,467],[694,459]],[[294,46],[135,55],[150,216],[367,194]]];l.event={start:function(){},end:function(e){a.push(e),c(e)},mouseup:function(){var e=this;setTimeout(function(){c(e)})}},t.customEditorV2(l);for(var p=0,v=g.length;p<v;p++)l.points=g[p],l.fillColor=0===p?u.includeArea.fill:u.excludeArea.fill,l.pointColor=0===p?u.includeArea.point:u.excludeArea.point,l.lineColor=0===p?u.includeArea.line:u.excludeArea.line,a.push(t.draw(l));c(a[0]);var _=document.getElementById("virtual_line"),f=new e(_),m=s();m.fillColor=u.blue,m.lineColor=u.blue,m.pointColor=u.blue;var w=[],y=[[[736,146],[455,333]],[[651,332],[295,152]]],h=function(e){for(var n=0,i=w.length;n<i;n++)w[n].normal();e.active()};m.event={start:function(){},end:function(e){w.push(e),h(e)},mouseup:function(){var e=this;setTimeout(function(){h(e)})}},f.customEditor(m);for(p=0,v=y.length;p<v;p++)m.points=y[p],w.push(f.draw(m));h(w[0]);var C=document.getElementById("common_calibration"),x=new e(C),A=d();A.initCenter=!0,A.notUseMoveTopLayer=!0,A.useOnlyRectangle=!0,A.minSize={width:100,height:100},A.maxSize={width:854,height:480},A.points=[[0,0],[0,480],[854,480],[854,0]],A.fillColor=u.red,A.lineColor=u.red,A.pointColor=u.red,x.draw(A),A.points=[[0,0],[0,100],[100,100],[100,0]],A.fillColor=u.blue,A.lineColor=u.blue,A.pointColor=u.blue,x.draw(A)});
},{"./src/modules/svg_geometry":17,"./scripts/polygon.js":12,"./scripts/uwa_privacy_polygon.js":13,"./scripts/uwa_privacy_rectangle.js":14,"./scripts/line.js":15,"./scripts/fixedratio.js":16}]},{},[7], null)
//# sourceMappingURL=src.ca0195e9.map